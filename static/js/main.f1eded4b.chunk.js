(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[1],{140:function(e,t,n){e.exports=n(229)},145:function(e,t,n){},146:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(45),u=n.n(c),o=(n(145),n(34)),i=n(35),s=n(37),l=n(36),f=(n(146),n(6)),p=n(84),d=n.n(p),h=n(54),b=n.n(h),E=n(17),m=function(e){var t=e.isAuth,n=e.login,r=e.logoutUser;return a.a.createElement("header",{className:b.a.header},a.a.createElement("div",{className:b.a.header_container},a.a.createElement("img",{alt:"logo",src:d.a}),t?a.a.createElement("div",null,n,a.a.createElement("button",{onClick:r},"Logout")):a.a.createElement(E.b,{to:"/login"},"Login")))},O=n(23),v=n(26),g=n(15),j=n(46),_=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return a.a.createElement(m,this.props)}}]),n}(a.a.Component),S=Object(g.d)(Object(O.b)((function(e){return{isAuth:Object(j.b)(e),login:Object(j.c)(e)}}),{logoutUser:v.d}))(_),w=n(33),P=n.n(w),y=function(){return a.a.createElement("nav",{className:P.a.nav},a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(E.b,{to:"/profile",activeClassName:P.a.active},"profile")),a.a.createElement("li",null,a.a.createElement(E.b,{to:"/messages",activeClassName:P.a.active},"messages")),a.a.createElement("li",null,a.a.createElement(E.b,{to:"/friends",activeClassName:P.a.active},"friends"))))},T=n(87),C=n.n(T),k=function(){return a.a.createElement("footer",{className:C.a.footer},"2020")},x=n(7),U=n(53),I=function(e){return e.app.isInitiated},A=function(e){return e.app.appErrors},R=function(e){return e.app.isShowError},L=n(89),N=n.n(L),D=function(e){var t=e.closeError,n=e.appErrors.map((function(e){return a.a.createElement("div",null,a.a.createElement("h1",null,e.errorName),a.a.createElement("p",null,e.errorMessage))}));return a.a.createElement("div",{className:N.a.showError},n,a.a.createElement("div",null,a.a.createElement("span",{onClick:t},"X")))},F=n(75),G=n.n(F),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,308))})),B=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,305))})),M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,306))})),W=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,307))})),z=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initiatedApp()}},{key:"render",value:function(){return this.props.isInitiated?a.a.createElement("div",{className:G()("app","showError")},a.a.createElement(S,null),a.a.createElement(y,null),a.a.createElement("main",{className:"main"},a.a.createElement(r.Suspense,{fallback:a.a.createElement(U.a,null)},a.a.createElement(f.d,null,a.a.createElement(f.b,{exact:!0,path:"/",component:function(){return a.a.createElement(f.a,{to:"/profile"})}}),a.a.createElement(f.b,{path:"/login",component:H}),a.a.createElement(f.b,{path:"/profile/:userId?",component:B}),a.a.createElement(f.b,{path:"/messages",component:M}),a.a.createElement(f.b,{path:"/friends",component:W}),a.a.createElement(f.b,{path:"*",component:function(){return a.a.createElement("div",null,"404 not found")}})))),a.a.createElement(k,null),this.props.isShowError&&a.a.createElement(D,{closeError:this.props.closeError,appErrors:this.props.appErrors})):a.a.createElement(U.a,null)}}]),n}(a.a.Component),X=Object(g.d)(Object(O.b)((function(e){return{isInitiated:I(e),appErrors:A(e),isShowError:R(e)}}),{initiatedApp:x.c,closeError:x.a}))(z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=n(90),Y=n(61),J=n(76),K=n(77),$=n(83),q=Object(g.c)({app:x.b,auth:v.a,profilePage:Y.b,messagesPage:J.b,friendsPage:K.a,form:$.a}),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||g.d,Z=Object(g.e)(q,Q(Object(g.a)(V.a)));window.store=Z;var ee=Z;u.a.render(a.a.createElement(E.a,null,a.a.createElement(O.a,{store:ee},a.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},26:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return h}));var r=n(5),a=n.n(r),c=n(13),u=n(2),o=n(8),i=n(28),s=n(7),l={id:null,email:null,login:null,isAuth:!1,captcha:null},f=function(e,t,n,r,a){return{type:"auth/SET_AUTH_USER_DATA",payload:{id:e,email:t,login:n,isAuth:r,captcha:a}}},p=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.authMe();case 3:0===(n=e.sent).resultCode&&(r=n.data,c=r.id,u=r.email,i=r.login,t(f(c,u,i,!0,null))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(Object(s.d)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e,t,n,r){return function(a){try{o.a.login(e,t,n,r).then((function(e){0===e.resultCode?a(p()):(10===e.resultCode&&a(b()),a(Object(i.b)("login",{_error:e.messages[0]})))}))}catch(c){a(Object(s.d)(c))}}},h=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.logout();case 3:0===e.sent.resultCode&&t(f(null,null,null,!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(Object(s.d)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},b=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.getCaptchaUrl();case 3:n=e.sent,t({type:"auth/GET_CAPTCHA_URL_SUCCESS",url:n.url}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(Object(s.d)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_AUTH_USER_DATA":return Object(u.a)(Object(u.a)({},e),t.payload);case"auth/GET_CAPTCHA_URL_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{captcha:t.url});default:return e}}},33:function(e,t,n){e.exports={nav:"Nav_nav__14xXg",active:"Nav_active__1fSSk"}},46:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u}));var r=function(e){return e.auth.isAuth},a=function(e){return e.auth.login},c=function(e){return e.auth.id},u=function(e){return e.auth.captcha}},53:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(88),u=n.n(c);t.a=function(){return a.a.createElement("div",null,a.a.createElement("img",{src:u.a,alt:""}))}},54:function(e,t,n){e.exports={header:"Header_header__fhbzO",header_container:"Header_header_container__16LNh"}},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return O})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return g}));var r=n(5),a=n.n(r),c=n(13),u=n(21),o=n(2),i=n(8),s=n(28),l=n(7),f="profilePage/ADD_POST",p="profilePage/DELETE_POST",d={postData:[{id:1,post:"Hi",like:1},{id:2,post:"It is my second post",like:7},{id:3,post:"How are you?",like:3},{id:4,post:"What do you think about my last post?:)",like:5}],userProfile:null,userStatus:null},h=function(e){return{type:f,post:e}},b=function(e){return{type:"profilePage/SET_USER_STATUS",userStatus:e}},E=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.c.getProfile(e);case 3:r=t.sent,n({type:"profilePage/SET_USER_PROFILE",userProfile:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(l.d)(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.c.getStatus(e);case 3:r=t.sent,n(b(r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(l.d)(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.c.updateStatus(e);case 3:0===t.sent.resultCode&&n(b(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(l.d)(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.c.savePhoto(e);case 3:0===(r=t.sent).resultCode&&n({type:"profilePage/SAVE_PHOTO_SUCCESS",photos:r.data.photos}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(l.d)(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=r().auth.id,t.next=4,i.c.saveProfile(e);case 4:0===(u=t.sent).resultCode?n(E(c)):n(Object(s.b)("userInfoEdit",{_error:u.messages})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(Object(l.d)(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:var n={id:5,post:t.post,like:0};return Object(o.a)(Object(o.a)({},e),{},{postData:[].concat(Object(u.a)(e.postData),[n])});case"profilePage/SET_USER_PROFILE":return Object(o.a)(Object(o.a)({},e),{},{userProfile:Object(o.a)({},t.userProfile)});case"profilePage/SET_USER_STATUS":return Object(o.a)(Object(o.a)({},e),{},{userStatus:t.userStatus});case p:return Object(o.a)(Object(o.a)({},e),{},{postData:e.postData.filter((function(e){return e.id!==t.postId}))});case"profilePage/SAVE_PHOTO_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{userProfile:Object(o.a)(Object(o.a)({},e.userProfile),{},{photos:t.photos})});default:return e}}},7:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s}));var r=n(21),a=n(2),c=n(26),u={isInitiated:!1,isShowError:!1,appErrors:[]},o=function(e){return{type:"app/SHOW_ERROR",error:e}},i=function(){return{type:"app/CLOSE_ERROR"}},s=function(){return function(e){var t=e(Object(c.b)());Promise.all([t]).then((function(){return e({type:"app/INITIATED_SUCCESSFULLY"})}))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/INITIATED_SUCCESSFULLY":return Object(a.a)(Object(a.a)({},e),{},{isInitiated:!0});case"app/SHOW_ERROR":var n={id:e.appErrors.length,errorName:t.error.name,errorMessage:t.error.message};return Object(a.a)(Object(a.a)({},e),{},{isShowError:!0,appErrors:[].concat(Object(r.a)(e.appErrors),[n])});case"app/CLOSE_ERROR":return Object(a.a)(Object(a.a)({},e),{},{isShowError:!1});default:return e}}},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(21),a=n(2),c="messagePage/ADD_MESSAGE",u={dialogData:[{id:0,message:"hello"},{id:1,message:"how are you?"},{id:2,message:"what do think about this?"},{id:3,message:"are you sure?"}],userData:[{id:0,name:"Alex"},{id:1,name:"Kirill"},{id:2,name:"Evgeny"},{id:3,name:"Olga"}]},o=function(e){return{type:c,message:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:e.dialogData.length,message:t.message};return Object(a.a)(Object(a.a)({},e),{},{dialogData:[].concat(Object(r.a)(e.dialogData),[n])});default:return e}}},77:function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return j}));var r=n(5),a=n.n(r),c=n(13),u=n(21),o=n(2),i=n(8),s=n(7),l="friendsPage/SET_USERS",f="friendsPage/FOLLOW_USER",p={users:[],totalCount:null,currentPage:1,usersOnPage:50,isFetching:!1,disableButton:[],portionSize:10},d=function(e){return{type:f,userId:e}},h=function(e){return{type:"friendsPage/UNFOLLOW_USER",userId:e}},b=function(e){return{type:"friendsPage/SET_CURRENT_PAGE",currentPage:e}},E=function(e){return{type:"friendsPage/TOGGLE_IS_FETCHING",isFetching:e}},m=function(e,t){return{type:"friendsPage/TOGGLE_IS_DISABLE_BUTTON",disableButton:e,userId:t}},O=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(E(!0)),n.next=4,i.b.getUsers(e,t);case 4:c=n.sent,r((a=c.items,{type:l,users:a})),r({type:"friendsPage/SET_TOTAL_COUNT",totalCount:c.totalCount}),r(b(t)),r(E(!1)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),r(Object(s.d)(n.t0));case 14:case"end":return n.stop()}var a}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},v=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(m(!0,n)),e.next=4,r(n);case 4:0===e.sent.resultCode&&(t(c(n)),t(m(!1,n))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(Object(s.d)(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),g=function(e){return function(t){return v(t,e,i.b.follow,d)}},j=function(e){return function(t){return v(t,e,i.b.unfollow,h)}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{users:t.users});case f:return Object(o.a)(Object(o.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(o.a)(Object(o.a)({},e),{},{followed:!0}):e}))});case"friendsPage/UNFOLLOW_USER":return Object(o.a)(Object(o.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(o.a)(Object(o.a)({},e),{},{followed:!1}):e}))});case"friendsPage/SET_TOTAL_COUNT":return Object(o.a)(Object(o.a)({},e),{},{totalCount:t.totalCount});case"friendsPage/SET_CURRENT_PAGE":return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.currentPage});case"friendsPage/TOGGLE_IS_FETCHING":return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});case"friendsPage/TOGGLE_IS_DISABLE_BUTTON":return Object(o.a)(Object(o.a)({},e),{},{disableButton:t.disableButton?[].concat(Object(u.a)(e.disableButton),[t.userId]):e.disableButton.filter((function(e){return e!==t.userId}))});default:return e}}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return o}));var r=n(86),a=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"328259c5-68c4-4f02-9ce4-53684a25ddd6"}}),c={authMe:function(){return a.get("auth/me").then((function(e){return e.data}))},login:function(e,t,n,r){return a.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},logout:function(){return a.delete("auth/login").then((function(e){return e.data}))},getCaptchaUrl:function(){return a.get("security/get-captcha-url").then((function(e){return e.data}))}},u={getProfile:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return a.put("profile/status",{status:e}).then((function(e){return e.data}))},savePhoto:function(e){var t=new FormData;return t.append("image",e),a.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},saveProfile:function(e){return a.put("profile",e).then((function(e){return e.data}))}},o={getUsers:function(e,t){return a.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},follow:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))}}},84:function(e,t,n){e.exports=n.p+"static/media/logo.92e8cb5c.jpg"},87:function(e,t,n){e.exports={footer:"Footer_footer__1u__D"}},88:function(e,t,n){e.exports=n.p+"static/media/preloader.5861c44d.gif"},89:function(e,t,n){e.exports={showError:"ShowError_showError__3_n44"}}},[[140,2,3]]]);
//# sourceMappingURL=main.f1eded4b.chunk.js.map